<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>ChatBot - noraldim</title><meta name="Description" content="Blogs"><meta property="og:title" content="ChatBot" />
<meta property="og:description" content="data cleaning You can clean with basic cleaning commands in python using &lsquo;open&rsquo; to open specific files and associate it with a variable and use &lsquo;replace &rsquo; to replace the element. In our case we just need to clean. Finally, we can use append to do the work.
import re rmnum = re.compile(r&#39;/d&#43;&#39;) one = [] with open(&#34;C:\\THINGS\\githup project\\meshochat.txt&#34;, &#39;r&#39;, encoding= &#34;utf-8&#34;) as mesho: for line in mesho: rm = line." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://noraldim.net/posts/cat/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-11T17:38:11+03:00" />
<meta property="article:modified_time" content="2023-02-11T17:38:11+03:00" /><meta property="og:site_name" content="Blogs" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ChatBot"/>
<meta name="twitter:description" content="data cleaning You can clean with basic cleaning commands in python using &lsquo;open&rsquo; to open specific files and associate it with a variable and use &lsquo;replace &rsquo; to replace the element. In our case we just need to clean. Finally, we can use append to do the work.
import re rmnum = re.compile(r&#39;/d&#43;&#39;) one = [] with open(&#34;C:\\THINGS\\githup project\\meshochat.txt&#34;, &#39;r&#39;, encoding= &#34;utf-8&#34;) as mesho: for line in mesho: rm = line."/>
<meta name="application-name" content="noraldim">
<meta name="apple-mobile-web-app-title" content="noraldim"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="canonical" href="https://noraldim.net/posts/cat/" /><link rel="next" href="https://noraldim.net/posts/linux/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "ChatBot",
        "inLanguage": "en-us",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/noraldim.net\/posts\/cat\/"
        },"genre": "posts","wordcount":  734 ,
        "url": "https:\/\/noraldim.net\/posts\/cat\/","datePublished": "2023-02-11T17:38:11+03:00","dateModified": "2023-02-11T17:38:11+03:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "noraldim"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/posts/" title="noraldim">Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="search in blogs" id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/posts/" title="noraldim">Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="search in blogs" id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">ChatBot</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>noraldim</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2023-02-11">2023-02-11</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;734 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;4 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#data-cleaning">data cleaning</a></li>
    <li><a href="#some-steps-if-you-use-postgresql">some steps if you use PostgreSQL</a></li>
    <li><a href="#git-and-github">git and github</a></li>
    <li><a href="#user-respond">user respond</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="data-cleaning">data cleaning</h2>
<p>You can clean with basic cleaning commands in python using &lsquo;open&rsquo; to open specific files and associate it with a variable and use &lsquo;replace &rsquo; to replace the element. In our case we just need to clean. Finally, we can use append to do the work.</p>
<pre tabindex="0"><code>import re


rmnum = re.compile(r&#39;/d+&#39;)
one = []

with open(&#34;C:\\THINGS\\githup project\\meshochat.txt&#34;, &#39;r&#39;, encoding= &#34;utf-8&#34;) as mesho:
    for line in mesho:
        rm = line.replace(&#39;/&#39;,&#39;&#39;).replace(&#39;:&#39;,&#39;&#39;).replace(&#39;AM&#39;,&#39;&#39;).replace(&#39;PM&#39;,&#39;&#39;)
        .replace(&#39;-&#39;,&#39;&#39;).replace(&#39;,&#39;,&#39;&#39;).replace(&#39; &#39;,&#39;&#39;).replace(&#39;ميشووو&#39;,&#39;ques &#39;)
        .replace(&#39;Nõr&#39;,&#39;ans &#39;)
        one.append(rm)
</code></pre><p>to delete the changing number in the date u can use re.compile(r&rsquo;\d+&rsquo;) to delete any number from chat
after cleaning the chat you will start to sort data in the table and here you need to learn RELATIONAL DATABASE MANAGEMENT SYSTEM in order to handle the data and store them.
in my case, I use PostgreSQL to handle chat log data and there are some important things you must get hands-on :</p>
<h2 id="some-steps-if-you-use-postgresql">some steps if you use PostgreSQL</h2>
<p>1- IF you handle your data with PostgreSQL you have to realize that by default it only accepts ASCII characters:
2- you need to use the &ldquo;UTF-8&rdquo; encoding method to avoid any error especially if you use a character out site ASCII list like Arabic characters</p>
<p>.
.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9okivnm3p2fgxp16w5tf.jpeg"
        data-srcset="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9okivnm3p2fgxp16w5tf.jpeg, https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9okivnm3p2fgxp16w5tf.jpeg 1.5x, https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9okivnm3p2fgxp16w5tf.jpeg 2x"
        data-sizes="auto"
        alt="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9okivnm3p2fgxp16w5tf.jpeg"
        title="Image description" /></p>
<p><code>NOTE USE : _CREATE DATABASE bot WITH ENCODING'UTF8_' </code></p>
<p>3- need to know how to handle data using psycopg2 or any other library to store and customize data in an effective way</p>
<pre tabindex="0"><code>import psycopg2

conect = psycopg2.connect(

    host = &#34;localhost&#34;,
    database = &#34;time&#34;,
    user = &#34;postgres&#34;,
    password = &#34;timezone&#34;
)
cur = conect.cursor()
cur.execute(&#34;INSERT INTO static(name, last_name, gender, email)
VALUES(&#39;ONE&#39;,&#39;SALIH&#39;,&#39;FEMEAL&#39;,&#39;Eada@gmail.com&#39;);&#34;)
cur.execute(&#34;SELECT * FROM static;&#34;)
rows = cur.fetchall()
# use for loop to print ever line you spasify 
for line in rows:
    print(f&#34;{line[0]} {line[1]} {line[2]} {line[3]} {line[4]}&#34;)
conect.commit()
cur.close()
conect.close()
</code></pre><h2 id="git-and-github">git and github</h2>
<p>After storing the data in CSV or TSV format you can use Git to upload your data to GitHub and there are some commands that will help you do that: &ldquo;git init &quot; and &ldquo;git add .&rdquo;
These two commands are important the first is to  create the git hidden file to initialize the project and the second one is to add an initialized folders to git file and finally you can use git commit to commit your initialization and git push to upload to GitHub in this way avoid any uploading error happening when you use drag and drop method.
After uploading the tsv file opens it in row form and copies the link this link will be the database for the chatbox bot.</p>
<p>From now on you can use any language to code the bot. In my case I use python because again I have many ways to handle data and here using pandas this tool gives you a mighty hand on accessing your data and distributing them in a way that serves your needs .<br>
The actual bot is divided into four parts. The first part just defines the database and bot api .</p>
<pre tabindex="0"><code>from typing import Counter

import requests 
import pandas as pd
resp = [ &#34;Sorry &#34;,&#34;have a nice day&#34;]
dburl = &#34;DATABASElink.tsv&#34;
url = &#34;botapi/&#34;
counter = 0
</code></pre><h2 id="user-respond">user respond</h2>
<p>the second part is reading the user message offset is the message id or &ldquo;update_id&rdquo; each message has an unique id and here you need to extract some information from json format like message and user id that change automatically .</p>
<pre tabindex="0"><code>def read(offset):

    para = {
            &#34;offset&#34; : offset          
        }

    req = requests.get(url + &#34;getUpdates&#34;, data = para)
    data = req.json()
    print(data)

    for result in data[&#34;result&#34;]:
        send(result)

    if data[&#34;result&#34;]:
        return data[&#34;result&#34;][-1][&#34;update_id&#34;] + 1
</code></pre><p>The third part is to process input given by the user if there is any capital letter it will make it small and so on and if  there is any message that not exist in the database it will give auto response from a list created privily in this case &ldquo;resp&rdquo;.</p>
<pre tabindex="0"><code>def out(message):
  global counter
  answer = df.loc[df[&#39;qus&#39;].str.lower()== message.lower()]


  if not answer.empty:
    answer = answer.iloc[0][&#39;ans&#39;]
    return answer
  else:
    counter = (counter + 1) % len(resp)
    return resp[counter]
    
              
</code></pre><p>the final part is sending message part here there is just a simple parameter take sends a message to the id that stores priestly from a list in the database.</p>
<pre tabindex="0"><code>
def send(result):

  text = result[&#34;message&#34;][&#34;text&#34;]
  answer = out(text)


  parameter = {
      
      &#34;chat_id&#34; : result[&#34;message&#34;][&#34;chat&#34;][&#34;id&#34;],        
      &#34;text&#34; : answer  ,
      &#34;reply_to_message_id&#34; : None     
  }


  req = requests.get(url + &#34;sendMessage&#34;, data = parameter)
  print(req.text)

offset = 0
</code></pre></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2023-02-11</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span>
                 
                </span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav">
            <a href="/posts/linux/" class="next" rel="next" title="Exploring the Power and Impact of Linux">Exploring the Power and Impact of Linux<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a> </div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;  <a href="/" target="_blank"></a></span>&nbsp;|&nbsp;<span class="license">Noraldim 😇</span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"search":{"highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
